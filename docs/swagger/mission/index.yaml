openapi: 3.0.3
info:
  title: Mission & Educator API
  version: v1
  description: |
    Comprehensive API for managing educational missions, educators, and training opportunities.

    **Features:**
    - Mission creation with comprehensive validation and file upload support
    - Organization-based mission management with role-based access control
    - Multi-skill mission support with flexible input formats
    - Date and time scheduling with validation and ISO 8601 conversion
    - Mission status tracking throughout lifecycle
    - Technical document upload and management via Cloudinary
    - Educator invitation system with tracking
    - Organization-specific mission filtering and management
    - Educator profile management with location-based services
    - Skills-based educator filtering
    - File upload support for educator documents

    **Authentication & Authorization:**
    - All endpoints require valid JWT authentication token (except health checks)
    - Mission creation and updates require organization role
    - Organization-specific endpoints require organization role
    - Educator-specific endpoints require educator role
    - Organization must exist before creating missions
    - Tokens obtained from Authentication API sign-in endpoint

    **Mission Lifecycle:**
    - `pending`: Newly created missions awaiting approval (default)
    - `ongoing`: Active missions in progress
    - `completed`: Successfully finished missions

    **File Upload Support:**
    - Technical documents for missions (jpg, jpeg, png, gif, pdf)
    - Educator documents (avatar, identity proof, criminal record, certificate of honor, diploma)
    - Maximum file size: 5MB
    - Automatic file processing and Cloudinary storage
    - Files stored in missions/{organizationId}/technicalDocument folder

    **Educator Management:**
    - Track invited, hired, and rejected educators
    - Send bulk invitations to multiple educators
    - Cross-reference missions with educator profiles
    - Location-based educator search
    - Skills-based filtering

  contact:
    name: API Support
    email: support@yourapi.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://api.yourapp.com
    description: Production server
  - url: https://romulus-backend.onrender.com
    description: Staging server
  - url: http://localhost:5000
    description: Development server

tags:
  - name: Mission Management
    description: Educational mission creation and management operations
  - name: Educator Management
    description: Educator profile creation, management, and search operations

components:
  schemas:
    # ================================
    # PRIMITIVE TYPES
    # ================================
    ID:
      type: string
      description: MongoDB ObjectId identifier
      example: "60d0fe4f5311236168a109ca"
      pattern: "^[0-9a-fA-F]{24}$"
      minLength: 24
      maxLength: 24

    Timestamp:
      type: string
      format: date-time
      description: ISO 8601 timestamp with timezone
      example: "2024-01-15T10:30:00.000Z"

    DocumentUrl:
      type: string
      description: URL or file path for uploaded documents from Cloudinary
      example: "https://res.cloudinary.com/dtipq9s09/image/upload/v1751048825/missions/60d0fe4f5311236168a109ca/technicalDocument.pdf"
      pattern: "^https?:\\/\\/.+\\.(jpg|jpeg|png|gif|pdf)$"

    MissionStatus:
      type: string
      enum: [pending, ongoing, completed]
      description: |
        Mission status throughout its lifecycle:
        - `pending`: Newly created mission awaiting approval (default)
        - `ongoing`: Active mission in progress
        - `completed`: Successfully finished mission
      default: pending
      example: pending

    TimeFormat:
      type: string
      description: Time in 24-hour HH:MM format
      example: "14:30"
      pattern: "^([01]?[0-9]|2[0-3]):[0-5][0-9]$"

    Gender:
      type: string
      enum: [male, female, other]
      description: Gender of the educator
      example: female

    Coordinates:
      type: array
      description: GeoJSON coordinates [longitude, latitude]
      items:
        type: number
      minItems: 2
      maxItems: 2
      example: [2.3522, 48.8566]

    # ================================
    # RESPONSE STRUCTURES
    # ================================
    BaseResponse:
      type: object
      required:
        - success
        - message
      properties:
        success:
          type: boolean
          description: Indicates if the operation completed successfully
        message:
          type: string
          description: Human-readable response message
          example: "Operation completed successfully"

    ErrorResponse:
      allOf:
        - $ref: "#/components/schemas/BaseResponse"
        - type: object
          properties:
            success:
              example: false
            message:
              example: "An error occurred processing your request"

    # ================================
    # USER REFERENCE SCHEMA
    # ================================
    UserReference:
      type: object
      required:
        - _id
        - email
      properties:
        _id:
          $ref: "#/components/schemas/ID"
        email:
          type: string
          format: email
          description: User's email address
          example: "educator@example.com"
        role:
          type: string
          description: User's role in the system
          example: "educator"

    # ================================
    # ORGANIZATION REFERENCE SCHEMA
    # ================================
    OrganizationReference:
      type: object
      required:
        - _id
        - organizationName
        - city
        - country
      properties:
        _id:
          $ref: "#/components/schemas/ID"
        organizationName:
          type: string
          description: Name of the organization
          example: "Global Education Solutions"
        city:
          type: string
          description: Organization's city
          example: "Paris"
        country:
          type: string
          description: Organization's country
          example: "France"
        phone:
          type: string
          description: Organization's contact phone
          example: "+33123456789"
        branches:
          type: array
          description: Organization's branch locations
          items:
            type: object
            properties:
              branchName:
                type: string
                example: "Downtown Branch"
              branchEmail:
                type: string
                format: email
                example: "downtown@example.com"

    # ================================
    # MISSION SCHEMAS
    # ================================
    MissionInvitation:
      type: object
      required:
        - mission
        - status
      properties:
        mission:
          $ref: "#/components/schemas/ID"
          description: Reference to the mission
        status:
          type: string
          enum: [pending, accepted, rejected]
          description: Invitation status
          example: "pending"

    EducatorFeedback:
      type: object
      required:
        - educator
        - feedback
        - rating
      properties:
        educator:
          oneOf:
            - $ref: "#/components/schemas/ID"
            - $ref: "#/components/schemas/Educator"
          description: Educator who provided the feedback (ObjectId or populated educator object)
        feedback:
          type: string
          description: Educator's feedback text
          example: "Great experience working on this mission. The organization was very supportive and the resources were excellent."
          maxLength: 500
        rating:
          type: number
          minimum: 1
          maximum: 5
          description: Rating from 1 to 5 stars
          example: 4

    Mission:
      type: object
      required:
        - _id
        - organization
        - title
        - description
        - branch
        - skills
        - start
        - end
        - status
        - invitedEducators
        - hiredEducators
        - rejectedEducators
        - createdAt
        - updatedAt
      properties:
        _id:
          $ref: "#/components/schemas/ID"
        organization:
          oneOf:
            - $ref: "#/components/schemas/ID"
            - $ref: "#/components/schemas/OrganizationReference"
          description: Associated organization (ObjectId in create response, populated object in get responses)
        preferredEducator:
          $ref: "#/components/schemas/ID"
          description: Preferred educator for the mission (optional)
          nullable: true
        title:
          type: string
          description: Mission title or name
          example: "Advanced Mathematics Training Program"
          maxLength: 200
        description:
          type: string
          description: Detailed mission description
          example: "Comprehensive training program covering advanced mathematical concepts including calculus, linear algebra, and statistical analysis for secondary education professionals."
          maxLength: 2000
        branch:
          type: string
          description: Specific branch location for the mission
          example: "Downtown Branch"
          maxLength: 100
        skills:
          type: array
          description: Required skills for the mission
          items:
            type: string
            minLength: 1
          example: ["mathematics", "algebra", "calculus", "statistics"]
          minItems: 1
          maxItems: 20
        start:
          type: string
          format: date-time
          description: Mission start date and time in ISO 8601 format
          example: "2025-07-01T09:00:00.000Z"
        end:
          type: string
          format: date-time
          description: Mission end date and time in ISO 8601 format
          example: "2025-08-30T17:00:00.000Z"
        technicalDocument:
          $ref: "#/components/schemas/DocumentUrl"
          description: Technical documentation or requirements document stored in Cloudinary
          nullable: true
        status:
          $ref: "#/components/schemas/MissionStatus"
        invitedEducators:
          type: array
          description: Array of educator IDs invited to this mission
          items:
            $ref: "#/components/schemas/ID"
          default: []
        hiredEducators:
          type: array
          description: Array of educator IDs hired for this mission
          items:
            $ref: "#/components/schemas/ID"
          default: []
        rejectedEducators:
          type: array
          description: Array of educator IDs who rejected this mission
          items:
            $ref: "#/components/schemas/ID"
          default: []
        educatorFeedback:
          type: array
          description: Array of feedback provided by educators for this mission
          items:
            $ref: "#/components/schemas/EducatorFeedback"
          default: []
        createdAt:
          $ref: "#/components/schemas/Timestamp"
        updatedAt:
          $ref: "#/components/schemas/Timestamp"

    # ================================
    # EDUCATOR SCHEMAS
    # ================================
    Educator:
      type: object
      required:
        - _id
        - user
        - firstName
        - lastName
        - gender
        - dateOfBirth
        - city
        - country
        - fullAddress
        - profession
        - hourlyRate
        - skills
        - education
        - createdAt
        - updatedAt
      properties:
        _id:
          $ref: "#/components/schemas/ID"
        user:
          oneOf:
            - $ref: "#/components/schemas/ID"
            - $ref: "#/components/schemas/UserReference"
          description: Associated user account (ObjectId in create response, populated object in get responses)
        avatar:
          $ref: "#/components/schemas/DocumentUrl"
          description: Profile picture URL
          nullable: true
        firstName:
          type: string
          description: Educator's first name
          example: "John"
          maxLength: 50
        lastName:
          type: string
          description: Educator's last name
          example: "Doe"
          maxLength: 50
        gender:
          $ref: "#/components/schemas/Gender"
        dateOfBirth:
          type: string
          format: date
          description: Date of birth in YYYY-MM-DD format
          example: "1985-03-15"
        city:
          type: string
          description: Educator's city
          example: "Paris"
          maxLength: 100
        country:
          type: string
          description: Educator's country
          example: "France"
          maxLength: 100
        fullAddress:
          type: string
          description: Complete address
          example: "123 Main St, Paris, France"
          maxLength: 500
        fullAddressCoordinates:
          type: object
          description: GeoJSON Point for location-based queries
          properties:
            type:
              type: string
              enum: [Point]
              example: "Point"
            coordinates:
              $ref: "#/components/schemas/Coordinates"
        bio:
          type: string
          description: Educator's biography
          example: "Experienced mathematics educator with 10+ years of teaching experience"
          maxLength: 1000
        identityProof:
          $ref: "#/components/schemas/DocumentUrl"
          description: Identity verification document URL
          nullable: true
        criminalRecord:
          $ref: "#/components/schemas/DocumentUrl"
          description: Criminal background check document URL
          nullable: true
        profession:
          type: string
          description: Educator's profession
          example: "Mathematics Teacher"
          maxLength: 100
        hourlyRate:
          type: number
          minimum: 0
          description: Hourly rate in local currency
          example: 45.50
        skills:
          type: array
          description: Educator's skills and competencies
          items:
            type: string
            minLength: 1
          example: ["mathematics", "algebra", "calculus", "statistics"]
          minItems: 1
        education:
          type: string
          description: Educational background
          example: "MSc Mathematics, University of Paris"
          maxLength: 500
        certificateOfHonor:
          $ref: "#/components/schemas/DocumentUrl"
          description: Certificate of honor document URL
          nullable: true
        diploma:
          $ref: "#/components/schemas/DocumentUrl"
          description: Diploma document URL
          nullable: true
        missionsInvitedFor:
          type: array
          description: Array of mission invitations
          items:
            type: object
            properties:
              mission:
                oneOf:
                  - $ref: "#/components/schemas/ID"
                  - type: object
                    description: Populated mission object (excluding educator arrays for privacy)
              status:
                type: string
                enum: [pending, accepted, rejected]
          default: []
        createdAt:
          $ref: "#/components/schemas/Timestamp"
        updatedAt:
          $ref: "#/components/schemas/Timestamp"

    # ================================
    # EDUCATOR-SPECIFIC SCHEMAS
    # ================================
    EducatorMissionView:
      type: object
      description: Mission data as seen by educators (excludes educator tracking arrays for privacy)
      required:
        - _id
        - organization
        - title
        - description
        - branch
        - skills
        - start
        - end
        - status
        - createdAt
        - updatedAt
      properties:
        _id:
          $ref: "#/components/schemas/ID"
        organization:
          $ref: "#/components/schemas/OrganizationReference"
          description: Populated organization object with full details
        preferredEducator:
          $ref: "#/components/schemas/ID"
          description: Preferred educator (optional)
          nullable: true
        title:
          type: string
          description: Mission title or name
          example: "Advanced Mathematics Training Program"
          maxLength: 200
        description:
          type: string
          description: Detailed mission description
          example: "Comprehensive training program covering advanced mathematical concepts including calculus, linear algebra, and statistical analysis for secondary education professionals."
          maxLength: 2000
        branch:
          type: string
          description: Specific branch location for the mission
          example: "Downtown Branch"
          maxLength: 100
        skills:
          type: array
          description: Required skills for the mission
          items:
            type: string
            minLength: 1
          example: ["mathematics", "algebra", "calculus", "statistics"]
          minItems: 1
          maxItems: 20
        start:
          type: string
          format: date-time
          description: Mission start date and time in ISO 8601 format
          example: "2025-07-01T09:00:00.000Z"
        end:
          type: string
          format: date-time
          description: Mission end date and time in ISO 8601 format
          example: "2025-08-30T17:00:00.000Z"
        technicalDocument:
          $ref: "#/components/schemas/DocumentUrl"
          description: Technical documentation or requirements document stored in Cloudinary
          nullable: true
        status:
          $ref: "#/components/schemas/MissionStatus"
        createdAt:
          $ref: "#/components/schemas/Timestamp"
        updatedAt:
          $ref: "#/components/schemas/Timestamp"
      # Note: invitedEducators, hiredEducators, rejectedEducators, educatorFeedback are explicitly excluded

    # ================================
    # REQUEST SCHEMAS
    # ================================
    EducatorCreateRequest:
      type: object
      required:
        - user
        - firstName
        - lastName
        - gender
        - dateOfBirth
        - city
        - country
        - fullAddress
        - profession
        - hourlyRate
        - skills
        - education
      properties:
        user:
          $ref: "#/components/schemas/ID"
          description: ID of the user account to associate with this educator profile
        firstName:
          type: string
          description: Educator's first name
          maxLength: 50
        lastName:
          type: string
          description: Educator's last name
          maxLength: 50
        gender:
          $ref: "#/components/schemas/Gender"
        dateOfBirth:
          type: string
          format: date
          description: Date of birth in YYYY-MM-DD format
        city:
          type: string
          description: Educator's city
          maxLength: 100
        country:
          type: string
          description: Educator's country
          maxLength: 100
        fullAddress:
          type: string
          description: Complete address
          maxLength: 500
        bio:
          type: string
          description: Educator's biography
          maxLength: 1000
        profession:
          type: string
          description: Educator's profession
          maxLength: 100
        hourlyRate:
          type: number
          minimum: 0
          description: Hourly rate in local currency
        skills:
          type: string
          description: Skills (comma-separated string)
          example: "mathematics,algebra,calculus,statistics"
        education:
          type: string
          description: Educational background
          maxLength: 500
        avatar:
          type: string
          format: binary
          description: Profile picture file (jpg, jpeg, png, gif, max 5MB)
        identityProof:
          type: string
          format: binary
          description: Identity verification document (jpg, jpeg, png, gif, pdf, max 5MB)
        criminalRecord:
          type: string
          format: binary
          description: Criminal background check document (jpg, jpeg, png, gif, pdf, max 5MB)
        certificateOfHonor:
          type: string
          format: binary
          description: Certificate of honor document (jpg, jpeg, png, gif, pdf, max 5MB)
        diploma:
          type: string
          format: binary
          description: Diploma document (jpg, jpeg, png, gif, pdf, max 5MB)

    EducatorUpdateRequest:
      type: object
      description: Partial update request for educator profile
      properties:
        firstName:
          type: string
          description: Educator's first name
          maxLength: 50
        lastName:
          type: string
          description: Educator's last name
          maxLength: 50
        gender:
          $ref: "#/components/schemas/Gender"
        dateOfBirth:
          type: string
          format: date
          description: Date of birth in YYYY-MM-DD format
        city:
          type: string
          description: Educator's city
          maxLength: 100
        country:
          type: string
          description: Educator's country
          maxLength: 100
        fullAddress:
          type: string
          description: Complete address
          maxLength: 500
        bio:
          type: string
          description: Educator's biography
          maxLength: 1000
        profession:
          type: string
          description: Educator's profession
          maxLength: 100
        hourlyRate:
          type: number
          minimum: 0
          description: Hourly rate in local currency
        skills:
          type: string
          description: Skills (comma-separated string)
          example: "mathematics,algebra,calculus,statistics"
        education:
          type: string
          description: Educational background
          maxLength: 500
        avatar:
          type: string
          format: binary
          description: Profile picture file (jpg, jpeg, png, gif, max 5MB)
        identityProof:
          type: string
          format: binary
          description: Identity verification document (jpg, jpeg, png, gif, pdf, max 5MB)
        criminalRecord:
          type: string
          format: binary
          description: Criminal background check document (jpg, jpeg, png, gif, pdf, max 5MB)
        certificateOfHonor:
          type: string
          format: binary
          description: Certificate of honor document (jpg, jpeg, png, gif, pdf, max 5MB)
        diploma:
          type: string
          format: binary
          description: Diploma document (jpg, jpeg, png, gif, pdf, max 5MB)

    MissionCreateRequest:
      type: object
      required:
        - organization
        - title
        - description
        - branch
        - skills
        - startDate
        - endDate
        - startTime
        - endTime
      properties:
        organization:
          $ref: "#/components/schemas/ID"
          description: ID of the organization creating the mission
        preferredEducator:
          $ref: "#/components/schemas/ID"
          description: Optional preferred educator
        title:
          type: string
          description: Mission title or name
          maxLength: 200
        description:
          type: string
          description: Detailed mission description
          maxLength: 2000
        branch:
          type: string
          description: Specific branch location for the mission
          maxLength: 100
        skills:
          type: string
          description: Required skills (comma-separated string)
          example: "mathematics,algebra,calculus,statistics"
        startDate:
          type: string
          format: date
          description: Mission start date (YYYY-MM-DD format)
          example: "2025-07-01"
        endDate:
          type: string
          format: date
          description: Mission end date (YYYY-MM-DD format)
          example: "2025-08-30"
        startTime:
          $ref: "#/components/schemas/TimeFormat"
          description: Daily start time for the mission
        endTime:
          $ref: "#/components/schemas/TimeFormat"
          description: Daily end time for the mission
        status:
          $ref: "#/components/schemas/MissionStatus"
          description: Optional mission status (defaults to pending)
        technicalDocument:
          type: string
          format: binary
          description: Technical documentation file (jpg, jpeg, png, gif, pdf, max 5MB)

    MissionUpdateRequest:
      type: object
      description: Partial update request - at least one field required
      properties:
        title:
          type: string
          description: Mission title or name
          maxLength: 200
        description:
          type: string
          description: Detailed mission description
          maxLength: 2000
        branch:
          type: string
          description: Specific branch location for the mission
          maxLength: 100
        startDate:
          type: string
          format: date
          description: Mission start date (YYYY-MM-DD format)
        endDate:
          type: string
          format: date
          description: Mission end date (YYYY-MM-DD format)
        startTime:
          $ref: "#/components/schemas/TimeFormat"
          description: Daily start time for the mission
        endTime:
          $ref: "#/components/schemas/TimeFormat"
          description: Daily end time for the mission
        status:
          $ref: "#/components/schemas/MissionStatus"
          description: Updated mission status

    InvitationRequest:
      type: object
      required:
        - missionId
        - invitees
      properties:
        missionId:
          $ref: "#/components/schemas/ID"
          description: ID of the mission to send invitations for
        invitees:
          type: array
          description: Array of educator IDs to invite
          items:
            $ref: "#/components/schemas/ID"
          minItems: 1
          example: ["60d0fe4f5311236168a109ca", "60d0fe4f5311236168a109cb"]

    # ================================
    # RESPONSE SCHEMAS
    # ================================
    EducatorCreateData:
      type: object
      description: Educator data in create response (user field as ObjectId)
      allOf:
        - $ref: "#/components/schemas/Educator"
        - type: object
          properties:
            user:
              $ref: "#/components/schemas/ID"
              description: Associated user ObjectId

    EducatorCreateResponse:
      allOf:
        - $ref: "#/components/schemas/BaseResponse"
        - type: object
          properties:
            data:
              $ref: "#/components/schemas/EducatorCreateData"
          example:
            success: true
            message: "Educator Profile Created Successfully"
            data:
              _id: "60d0fe4f5311236168a109ca"
              user: "684a9654caa07bcde4138271"
              firstName: "John"
              lastName: "Doe"
              gender: "male"
              dateOfBirth: "1985-03-15"
              city: "Paris"
              country: "France"
              fullAddress: "123 Main St, Paris, France"
              profession: "Mathematics Teacher"
              hourlyRate: 45.50
              skills: ["mathematics", "algebra", "calculus", "statistics"]
              education: "MSc Mathematics, University of Paris"
              avatar: "https://res.cloudinary.com/dtipq9s09/image/upload/v1751048825/educators/avatar.jpg"
              createdAt: "2025-06-27T14:30:00.000Z"
              updatedAt: "2025-06-27T14:30:00.000Z"

    EducatorListResponse:
      allOf:
        - $ref: "#/components/schemas/BaseResponse"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/Educator"
          example:
            success: true
            message: "Educators retrieved successfully."

    EducatorSingleResponse:
      allOf:
        - $ref: "#/components/schemas/BaseResponse"
        - type: object
          properties:
            data:
              $ref: "#/components/schemas/Educator"
          example:
            success: true
            message: "Educator profile retrieved successfully."

    EducatorUpdateResponse:
      allOf:
        - $ref: "#/components/schemas/BaseResponse"
        - type: object
          properties:
            data:
              $ref: "#/components/schemas/Educator"
          example:
            success: true
            message: "Educator Profile Updated Successfully"

    EducatorNearbyResponse:
      allOf:
        - $ref: "#/components/schemas/BaseResponse"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/Educator"
          example:
            success: true
            message: "Nearby educators retrieved successfully."

    MissionCreateData:
      type: object
      description: Mission data in create response (organization field as ObjectId)
      allOf:
        - $ref: "#/components/schemas/Mission"
        - type: object
          properties:
            organization:
              $ref: "#/components/schemas/ID"
              description: Associated organization ObjectId

    MissionCreateResponse:
      allOf:
        - $ref: "#/components/schemas/BaseResponse"
        - type: object
          properties:
            data:
              $ref: "#/components/schemas/MissionCreateData"
          example:
            success: true
            message: "Mission created successfully"
            data:
              _id: "60d0fe4f5311236168a109ca"
              organization: "684a9654caa07bcde4138271"
              title: "Advanced Mathematics Training Program"
              description: "Comprehensive training program covering advanced mathematical concepts including calculus, linear algebra, and statistical analysis for secondary education professionals."
              branch: "Downtown Branch"
              skills: ["mathematics", "algebra", "calculus", "statistics"]
              start: "2025-07-01T09:00:00.000Z"
              end: "2025-08-30T17:00:00.000Z"
              technicalDocument: "https://res.cloudinary.com/dtipq9s09/image/upload/v1751048825/missions/684a9654caa07bcde4138271/technicalDocument.pdf"
              status: "pending"
              invitedEducators: []
              hiredEducators: []
              rejectedEducators: []
              educatorFeedback: []
              createdAt: "2025-06-27T14:30:00.000Z"
              updatedAt: "2025-06-27T14:30:00.000Z"

    MissionListResponse:
      allOf:
        - $ref: "#/components/schemas/BaseResponse"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/Mission"
          example:
            success: true
            message: "Missions retrieved successfully"

    MissionSingleResponse:
      allOf:
        - $ref: "#/components/schemas/BaseResponse"
        - type: object
          properties:
            data:
              $ref: "#/components/schemas/Mission"
          example:
            success: true
            message: "Mission retrieved successfully"

    MissionUpdateResponse:
      allOf:
        - $ref: "#/components/schemas/BaseResponse"
        - type: object
          properties:
            data:
              $ref: "#/components/schemas/Mission"
          example:
            success: true
            message: "Mission updated successfully"

    EducatorMissionResponse:
      allOf:
        - $ref: "#/components/schemas/BaseResponse"
        - type: object
          properties:
            data:
              $ref: "#/components/schemas/EducatorMissionView"

    InvitationResponse:
      allOf:
        - $ref: "#/components/schemas/BaseResponse"
        - type: object
          example:
            success: true
            message: "Invitations have been sent to 5 educators successfully."

  parameters:
    MissionIdPath:
      in: path
      name: id
      required: true
      description: MongoDB ObjectId of the mission
      schema:
        $ref: "#/components/schemas/ID"

    OrganizationIdPath:
      in: path
      name: id
      required: true
      description: MongoDB ObjectId of the organization
      schema:
        $ref: "#/components/schemas/ID"

    EducatorIdPath:
      in: path
      name: id
      required: true
      description: MongoDB ObjectId of the educator
      schema:
        $ref: "#/components/schemas/ID"

    MissionIdPathParam:
      in: path
      name: mId
      required: true
      description: MongoDB ObjectId of the mission
      schema:
        $ref: "#/components/schemas/ID"

    OrganizationIdPathParam:
      in: path
      name: oId
      required: true
      description: MongoDB ObjectId of the organization
      schema:
        $ref: "#/components/schemas/ID"

    EducatorIdPathParam:
      in: path
      name: eId
      required: true
      description: MongoDB ObjectId of the educator
      schema:
        $ref: "#/components/schemas/ID"

    CoordinatesQuery:
      in: query
      name: coordinates
      required: true
      description: Coordinates as comma-separated string "longitude,latitude"
      schema:
        type: string
        example: "2.3522,48.8566"

    DistanceQuery:
      in: query
      name: distance
      required: true
      description: Search radius distance in kilometers
      schema:
        type: number
        minimum: 0
        example: 10

    SkillsQuery:
      in: query
      name: skills
      required: false
      description: Skills filter as comma-separated string
      schema:
        type: string
        example: "mathematics,algebra,physics"

  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        JWT token obtained from the authentication sign-in endpoint.
        Include in the Authorization header as: `Bearer <token>`

  responses:
    # ================================
    # SUCCESS RESPONSES
    # ================================
    EducatorCreateSuccess:
      description: Educator profile created successfully
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/EducatorCreateResponse"

    EducatorListSuccess:
      description: Educators list retrieved successfully
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/EducatorListResponse"

    EducatorProfileResponse:
      description: Educator profile retrieved successfully
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/EducatorSingleResponse"
          example:
            success: true
            message: "Educator profile retrieved successfully."
            data:
              _id: "60d0fe4f5311236168a109ca"
              user:
                _id: "684a9654caa07bcde4138271"
                email: "educator@example.com"
                role: "educator"
              firstName: "John"
              lastName: "Doe"
              gender: "male"
              dateOfBirth: "1985-03-15"
              city: "Paris"
              country: "France"
              fullAddress: "123 Main St, Paris, France"
              bio: "Experienced mathematics educator with 10+ years of teaching experience"
              profession: "Mathematics Teacher"
              hourlyRate: 45.50
              skills: ["mathematics", "algebra", "calculus", "statistics"]
              education: "MSc Mathematics, University of Paris"
              avatar: "https://res.cloudinary.com/dtipq9s09/image/upload/v1751048825/educators/avatar.jpg"
              identityProof: "https://res.cloudinary.com/dtipq9s09/image/upload/v1751048825/educators/identity.pdf"
              missionsInvitedFor: [
                {
                  mission: "60d0fe4f5311236168a109ca",
                  status: "pending"
                }
              ]
              createdAt: "2025-06-27T14:30:00.000Z"
              updatedAt: "2025-06-28T10:15:00.000Z"

    EducatorUpdateSuccess:
      description: Educator profile updated successfully
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/EducatorUpdateResponse"

    EducatorNearbySuccess:
      description: Nearby educators retrieved successfully
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/EducatorNearbyResponse"

    MissionCreateSuccess:
      description: Mission created successfully
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/MissionCreateResponse"

    MissionListSuccess:
      description: Missions list retrieved successfully
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/MissionListResponse"

    MissionProfileResponse:
      description: Mission retrieved successfully
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/MissionSingleResponse"
          example:
            success: true
            message: "Mission retrieved successfully"
            data:
              _id: "60d0fe4f5311236168a109ca"
              organization:
                _id: "684a9654caa07bcde4138271"
                organizationName: "Global Education Solutions"
                city: "Paris"
                country: "France"
                phone: "+33123456789"
                branches:
                  - branchName: "Downtown Branch"
                    branchEmail: "downtown@example.com"
              title: "Advanced Mathematics Training Program"
              description: "Comprehensive training program covering advanced mathematical concepts including calculus, linear algebra, and statistical analysis for secondary education professionals."
              branch: "Downtown Branch"
              skills: ["mathematics", "algebra", "calculus", "statistics"]
              start: "2025-07-01T09:00:00.000Z"
              end: "2025-08-30T17:00:00.000Z"
              technicalDocument: "https://res.cloudinary.com/dtipq9s09/image/upload/v1751048825/missions/684a9654caa07bcde4138271/technicalDocument.pdf"
              status: "ongoing"
              invitedEducators: ["60d0fe4f5311236168a109ca"]
              hiredEducators: []
              rejectedEducators: []
              educatorFeedback: [
                {
                  educator: "60d0fe4f5311236168a109ca",
                  feedback: "Excellent mission with great learning opportunities. The organization provided all necessary resources.",
                  rating: 5
                }
              ]
              createdAt: "2025-06-27T14:30:00.000Z"
              updatedAt: "2025-06-28T10:15:00.000Z"

    MissionUpdateSuccess:
      description: Mission updated successfully
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/MissionUpdateResponse"

    InvitationSuccess:
      description: Invitations sent successfully
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/InvitationResponse"

    # ================================
    # ERROR RESPONSES
    # ================================
    BadRequest:
      description: Invalid request data or business logic violation
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          examples:
            validationError:
              summary: Field validation failed
              value:
                success: false
                message: "Title cannot exceed 200 characters"
            dateValidation:
              summary: Date/time validation failed
              value:
                success: false
                message: "Invalid date or time input."
            timeFormatError:
              summary: Time format validation failed
              value:
                success: false
                message: "Time must be in HH:MM format (24-hour)"
            skillsRequired:
              summary: Skills validation failed
              value:
                success: false
                message: "At least one skill is required"
            updateMinFields:
              summary: Update requires at least one field
              value:
                success: false
                message: "At least one field must be provided for update"
            profileExists:
              summary: Profile already exists
              value:
                success: false
                message: "User already has educator profile. Log in again."
            conflictingProfile:
              summary: Conflicting profile type
              value:
                success: false
                message: "User already has organization profile."

    Unauthorized:
      description: Authentication failed or invalid credentials
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          examples:
            missingToken:
              summary: No authentication token provided
              value:
                success: false
                message: "Authorization token missing or malformed"
            invalidToken:
              summary: Token expired or malformed
              value:
                success: false
                message: "Invalid or expired token"

    Forbidden:
      description: Insufficient permissions for the operation
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          examples:
            organizationRoleRequired:
              summary: Organization role required
              value:
                success: false
                message: "Access denied: organization role required"
            educatorRoleRequired:
              summary: Educator role required
              value:
                success: false
                message: "Access denied: educator role required"

    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          examples:
            organizationNotFound:
              summary: Associated organization not found
              value:
                success: false
                message: "Organization not found"
            missionNotFound:
              summary: Mission not found
              value:
                success: false
                message: "Mission not found"
            educatorNotFound:
              summary: Educator not found
              value:
                success: false
                message: "Educator profile not found."
            userNotFound:
              summary: User not found
              value:
                success: false
                message: "User does not exist."

    InternalServerError:
      description: Unexpected server error occurred
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          examples:
            missionCreationFailed:
              summary: Database operation failed
              value:
                success: false
                message: "Failed to create mission"
            missionUpdateFailed:
              summary: Database update operation failed
              value:
                success: false
                message: "Failed to update mission"
            educatorCreationFailed:
              summary: Educator creation failed
              value:
                success: false
                message: "An error occurred while creating the profile."
            educatorUpdateFailed:
              summary: Educator update failed
              value:
                success: false
                message: "An error occurred while updating the profile."

security:
  - BearerAuth: []

paths:
  # ================================
  # EDUCATOR ENDPOINTS
  # ================================
  /api/v1/educators:
    post:
      summary: Create educator profile
      description: |
        Creates a new educator profile for an authenticated user.

        **Prerequisites:**
        - Valid JWT authentication token
        - User must have educator role
        - User must not already have an educator or organization profile
        - Associated user must exist in the system

        **File Upload Support:**
        - Content-Type: multipart/form-data
        - Supported formats: jpg, jpeg, png, gif, pdf
        - Maximum file size: 5MB per file
        - Files are processed and stored with generated paths in Cloudinary
        - Supported documents: avatar, identityProof, criminalRecord, certificateOfHonor, diploma

        **Skills Processing:**
        - Skills provided as comma-separated string
        - Processed into array format for storage
        - At least one skill required

        **Validation Rules:**
        - firstName, lastName: Max 50 characters
        - city, country: Max 100 characters
        - fullAddress: Max 500 characters
        - bio: Max 1000 characters
        - profession: Max 100 characters
        - education: Max 500 characters
        - hourlyRate: Must be non-negative number

        **Business Logic:**
        - Validates user existence and uniqueness
        - Prevents duplicate profiles (educator or organization)
        - Handles file uploads and path extraction
        - Initializes missionsInvitedFor as empty array

      operationId: create-educator-profile
      tags: [Educator Management]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/EducatorCreateRequest"
            examples:
              completeProfile:
                summary: Complete educator profile with all fields
                value:
                  user: "684a9654caa07bcde4138271"
                  firstName: "John"
                  lastName: "Doe"
                  gender: "male"
                  dateOfBirth: "1985-03-15"
                  city: "Paris"
                  country: "France"
                  fullAddress: "123 Main St, Paris, France"
                  bio: "Experienced mathematics educator with 10+ years of teaching experience"
                  profession: "Mathematics Teacher"
                  hourlyRate: 45.50
                  skills: "mathematics,algebra,calculus,statistics"
                  education: "MSc Mathematics, University of Paris"
              minimalProfile:
                summary: Minimal required fields
                value:
                  user: "684a9654caa07bcde4138271"
                  firstName: "Jane"
                  lastName: "Smith"
                  gender: "female"
                  dateOfBirth: "1990-08-20"
                  city: "Lyon"
                  country: "France"
                  fullAddress: "456 Oak Ave, Lyon, France"
                  profession: "Science Teacher"
                  hourlyRate: 40.00
                  skills: "science,biology,chemistry"
                  education: "BSc Biology, University of Lyon"
      responses:
        201:
          $ref: "#/components/responses/EducatorCreateSuccess"
        400:
          $ref: "#/components/responses/BadRequest"
        401:
          $ref: "#/components/responses/Unauthorized"
        403:
          $ref: "#/components/responses/Forbidden"
        404:
          $ref: "#/components/responses/NotFound"
        500:
          $ref: "#/components/responses/InternalServerError"

    get:
      summary: Get all educators or search nearby educators
      description: |
        Retrieves all educator profiles in the system, or filters by location and skills if query parameters are provided.

        **Authentication:**
        - Requires valid JWT authentication token
        - No specific role requirement for all educators
        - Organization role required for location-based search

        **Query Parameters:**
        - coordinates: Optional - longitude,latitude as comma-separated string (requires organization role)
        - distance: Optional - search radius in kilometers (requires organization role)
        - skills: Optional - comma-separated skills filter

        **Behavior:**
        - If `coordinates` and `distance` are provided, returns educators within the specified distance, optionally filtered by skills.
        - If no query parameters are provided, returns all educators.

        **Response Details:**
        - Returns array of educator profiles
        - Each educator includes populated user object with email and role
        - All document URLs and file paths are included
        - Mission invitations are included with populated mission data
        - No pagination applied - returns all educators

        **Use Cases:**
        - Browse available educators
        - Admin dashboard for educator management
        - Educator discovery for organizations
        - Analytics and reporting
        - Find local educators for missions
        - Location-based educator recruitment
        - Skills-based matching within geographic area

      operationId: get-educators
      tags: [Educator Management]
      security:
        - BearerAuth: []
      parameters:
        - $ref: "#/components/parameters/CoordinatesQuery"
        - $ref: "#/components/parameters/DistanceQuery"
        - $ref: "#/components/parameters/SkillsQuery"
      responses:
        200:
          $ref: "#/components/responses/EducatorListSuccess"
        401:
          $ref: "#/components/responses/Unauthorized"
        403:
          $ref: "#/components/responses/Forbidden"
        500:
          $ref: "#/components/responses/InternalServerError"

  /api/v1/educators/{id}:
    get:
      summary: Get educator by ID
      description: |
        Retrieves a specific educator profile by its MongoDB ObjectId.

        **Authentication:**
        - Requires valid JWT authentication token
        - No specific role requirement

        **Response Details:**
        - Returns complete educator profile with populated user information
        - User object includes email and role details
        - All uploaded documents and file paths are included
        - Mission invitations included with populated mission data (excluding educator arrays for privacy)
        - Shows current profile status and all personal information

        **Use Cases:**
        - Display detailed educator information
        - Educator profile viewing
        - Mission assignment evaluation
        - Profile management and verification

      operationId: get-educator-by-id
      tags: [Educator Management]
      security:
        - BearerAuth: []
      parameters:
        - $ref: "#/components/parameters/EducatorIdPath"
      responses:
        200:
          $ref: "#/components/responses/EducatorProfileResponse"
        401:
          $ref: "#/components/responses/Unauthorized"
        404:
          $ref: "#/components/responses/NotFound"
        500:
          $ref: "#/components/responses/InternalServerError"

    patch:
      summary: Update educator profile by ID
      description: |
        Updates an existing educator profile with partial data.

        **Prerequisites:**
        - Valid JWT authentication token
        - User must have educator role
        - Educator profile must exist in the system

        **Update Rules:**
        - Partial updates supported - provide only fields to update
        - All validation rules apply to updated fields
        - File uploads supported for document updates
        - Skills processing maintains comma-separated string format

        **File Upload Support:**
        - Content-Type: multipart/form-data
        - Supported formats: jpg, jpeg, png, gif, pdf
        - Maximum file size: 5MB per file
        - File uploads replace existing documents
        - Supported documents: avatar, identityProof, criminalRecord, certificateOfHonor, diploma

        **Validation:**
        - Same validation rules as creation apply to updated fields
        - Character limits apply to text fields
        - Skills must be comma-separated string if provided

        **Business Logic:**
        - Educator profile must exist before update
        - File uploads replace existing documents
        - Response includes updated educator data
        - Skills processing converts string to array format

      operationId: update-educator-by-id
      tags: [Educator Management]
      security:
        - BearerAuth: []
      parameters:
        - $ref: "#/components/parameters/EducatorIdPath"
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/EducatorUpdateRequest"
            examples:
              profileUpdate:
                summary: Update basic profile information
                value:
                  firstName: "John"
                  lastName: "Smith"
                  bio: "Updated biography with new experience"
                  hourlyRate: 50.00
              skillsUpdate:
                summary: Update skills and profession
                value:
                  skills: "mathematics,physics,programming"
                  profession: "STEM Educator"
                  education: "PhD Physics, University of Oxford"
              contactUpdate:
                summary: Update contact and location
                value:
                  city: "London"
                  country: "United Kingdom"
                  fullAddress: "789 New St, London, UK"
      responses:
        200:
          $ref: "#/components/responses/EducatorUpdateSuccess"
        400:
          $ref: "#/components/responses/BadRequest"
        401:
          $ref: "#/components/responses/Unauthorized"
        403:
          $ref: "#/components/responses/Forbidden"
        404:
          $ref: "#/components/responses/NotFound"
        500:
          $ref: "#/components/responses/InternalServerError"

  # ================================
  # MISSION ENDPOINTS
  # ================================
  /api/v1/missions:
    post:
      summary: Create new mission
      description: |
        Creates a new educational mission for an organization.

        **Prerequisites:**
        - Valid JWT authentication token
        - User must have organization role
        - Organization must exist in the system

        **File Upload Support:**
        - Content-Type: multipart/form-data
        - Technical document formats: jpg, jpeg, png, gif, pdf
        - Maximum file size: 5MB
        - Files are processed and stored with generated paths in Cloudinary
        - Files stored in missions/{organizationId}/technicalDocument folder

        **Date/Time Processing:**
        - Separate date and time inputs are combined into ISO 8601 format
        - startDate + startTime = start (ISO 8601)
        - endDate + endTime = end (ISO 8601)
        - Invalid date/time combinations throw validation errors

        **Validation Rules:**
        - Title: Max 200 characters
        - Description: Max 2000 characters
        - Branch: Max 100 characters
        - Skills: Comma-separated string, processed into array (1-20 skills)
        - Time format: HH:MM (24-hour)
        - Status: Defaults to "pending"

        **Business Logic:**
        - Validates organization existence
        - Processes skills from comma-separated string to array
        - Handles file upload for technical documents via Cloudinary
        - Initializes educator arrays as empty

      operationId: create-mission
      tags: [Mission Management]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/MissionCreateRequest"
            examples:
              completeMission:
                summary: Complete mission with all fields
                value:
                  organization: "684a9654caa07bcde4138271"
                  title: "Advanced Mathematics Training Program"
                  description: "Comprehensive training program covering advanced mathematical concepts including calculus, linear algebra, and statistical analysis for secondary education professionals."
                  branch: "Downtown Branch"
                  skills: "mathematics,algebra,calculus,statistics"
                  startDate: "2025-07-01"
                  endDate: "2025-08-30"
                  startTime: "09:00"
                  endTime: "17:00"
              minimalMission:
                summary: Minimal required fields
                value:
                  organization: "684a9654caa07bcde4138271"
                  title: "Basic Science Workshop"
                  description: "Introduction to basic scientific principles for primary educators"
                  branch: "Main Branch"
                  skills: "science,biology"
                  startDate: "2025-08-15"
                  endDate: "2025-09-15"
                  startTime: "10:00"
                  endTime: "16:00"
      responses:
        201:
          $ref: "#/components/responses/MissionCreateSuccess"
        400:
          $ref: "#/components/responses/BadRequest"
        401:
          $ref: "#/components/responses/Unauthorized"
        403:
          $ref: "#/components/responses/Forbidden"
        404:
          $ref: "#/components/responses/NotFound"
        500:
          $ref: "#/components/responses/InternalServerError"

    get:
      summary: Get all missions
      description: |
        Retrieves all missions in the system with populated organization information.

        **Authentication:**
        - Requires valid JWT authentication token
        - No specific role requirement

        **Response Details:**
        - Returns array of all missions
        - Each mission includes populated organization object
        - Organization includes basic info and branch details
        - All document URLs and file paths are included
        - Educator arrays (invited, hired, rejected) and feedback are included
        - No pagination applied - returns all missions

        **Use Cases:**
        - Browse available missions
        - Admin dashboard for mission management
        - Mission discovery for educators
        - Analytics and reporting

      operationId: get-all-missions
      tags: [Mission Management]
      security:
        - BearerAuth: []
      responses:
        200:
          $ref: "#/components/responses/MissionListSuccess"
        401:
          $ref: "#/components/responses/Unauthorized"
        500:
          $ref: "#/components/responses/InternalServerError"

  /api/v1/missions/organization/{id}:
    get:
      summary: Get all missions for a specific organization
      description: |
        Retrieves all missions created by a specific organization.

        **Prerequisites:**
        - Valid JWT authentication token
        - User must have organization role

        **Response Details:**
        - Returns array of missions for the specified organization
        - Each mission includes populated organization object
        - All educator tracking arrays and feedback are included
        - Filtered by organization ID

        **Use Cases:**
        - Organization dashboard showing their missions
        - Organization-specific mission management
        - Track organization's mission history

      operationId: get-all-missions-by-organization
      tags: [Mission Management]
      security:
        - BearerAuth: []
      parameters:
        - $ref: "#/components/parameters/OrganizationIdPath"
      responses:
        200:
          $ref: "#/components/responses/MissionListSuccess"
        401:
          $ref: "#/components/responses/Unauthorized"
        403:
          $ref: "#/components/responses/Forbidden"
        500:
          $ref: "#/components/responses/InternalServerError"

  /api/v1/missions/{id}:
    get:
      summary: Get mission by ID
      description: |
        Retrieves a specific mission by its MongoDB ObjectId.

        **Authentication:**
        - Requires valid JWT authentication token
        - No specific role requirement

        **Response Details:**
        - Returns complete mission with populated organization information
        - Organization object includes name, location, contact details, and branches
        - All technical documents and file paths are included
        - Shows current mission status and scheduling details
        - Includes all educator tracking arrays and educator feedback

        **Use Cases:**
        - Display detailed mission information
        - Mission application process
        - Mission management and tracking
        - Educator mission evaluation

      operationId: get-mission-by-id
      tags: [Mission Management]
      security:
        - BearerAuth: []
      parameters:
        - $ref: "#/components/parameters/MissionIdPath"
      responses:
        200:
          $ref: "#/components/responses/MissionProfileResponse"
        401:
          $ref: "#/components/responses/Unauthorized"
        404:
          $ref: "#/components/responses/NotFound"
        500:
          $ref: "#/components/responses/InternalServerError"

    patch:
      summary: Update mission by ID
      description: |
        Updates an existing mission with partial data.

        **Prerequisites:**
        - Valid JWT authentication token
        - User must have organization role
        - Mission must exist in the system

        **Update Rules:**
        - At least one field must be provided for update
        - All validation rules apply to updated fields
        - File uploads supported for technical document updates
        - Uses findByIdAndUpdate with new: true and upsert: true

        **Date/Time Processing:**
        - If date/time fields are updated, they follow same conversion logic as creation
        - startDate + startTime combined into start field
        - endDate + endTime combined into end field

        **Validation:**
        - Same validation rules as creation apply to updated fields
        - Date/time format validation if dates/times are updated
        - Character limits apply to text fields

        **Business Logic:**
        - Mission must exist before update
        - File uploads replace existing technical documents
        - Status transitions are allowed based on mission lifecycle
        - Response includes updated mission data

      operationId: update-mission-by-id
      tags: [Mission Management]
      security:
        - BearerAuth: []
      parameters:
        - $ref: "#/components/parameters/MissionIdPath"
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/MissionUpdateRequest"
            examples:
              statusUpdate:
                summary: Update mission status
                value:
                  status: "ongoing"
              scheduleUpdate:
                summary: Update mission schedule
                value:
                  startDate: "2025-08-01"
                  endDate: "2025-09-30"
                  startTime: "08:30"
                  endTime: "16:30"
              partialUpdate:
                summary: Update multiple fields
                value:
                  title: "Updated Mission Title"
                  description: "Updated comprehensive mission description"
                  status: "ongoing"
      responses:
        200:
          $ref: "#/components/responses/MissionUpdateSuccess"
        400:
          $ref: "#/components/responses/BadRequest"
        401:
          $ref: "#/components/responses/Unauthorized"
        403:
          $ref: "#/components/responses/Forbidden"
        404:
          $ref: "#/components/responses/NotFound"
        500:
          $ref: "#/components/responses/InternalServerError"

  /api/v1/missions/{mId}/organization/{oId}:
    get:
      summary: Get specific mission by organization
      description: |
        Retrieves a specific mission for a specific organization by mission ID and organization ID.

        **Prerequisites:**
        - Valid JWT authentication token
        - User must have organization role

        **Response Details:**
        - Returns single mission object with populated organization
        - **INCLUDES all educator arrays (invited, hired, rejected) and educator feedback for organization management**
        - Shows complete mission details for organization dashboard
        - Educator feedback includes populated educator information for comprehensive review

        **Use Cases:**
        - Organization viewing their mission details
        - Organization managing educator assignments
        - Track educator status for mission planning

      operationId: get-mission-by-organization
      tags: [Mission Management]
      security:
        - BearerAuth: []
      parameters:
        - $ref: "#/components/parameters/MissionIdPathParam"
        - $ref: "#/components/parameters/OrganizationIdPathParam"
      responses:
        200:
          $ref: "#/components/responses/MissionProfileResponse"
        401:
          $ref: "#/components/responses/Unauthorized"
        403:
          $ref: "#/components/responses/Forbidden"
        404:
          $ref: "#/components/responses/NotFound"
        500:
          $ref: "#/components/responses/InternalServerError"

  /api/v1/missions/{mId}/educator/{eId}:
    get:
      summary: Get mission by educator association
      description: |
        Retrieves a specific mission where the educator is involved (invited, hired, or rejected).

        **Prerequisites:**
        - Valid JWT authentication token
        - User must have educator role

        **Search Logic:**
        - Uses $or query to find missions where educator ID appears in:
          - invitedEducators array
          - hiredEducators array  
          - rejectedEducators array
        - Returns first matching mission with specified mission ID

        **Response Details:**
        - Returns single mission object with populated organization
        - **EXCLUDES educator tracking arrays (invitedEducators, hiredEducators, rejectedEducators, educatorFeedback) for privacy**
        - Educator can see mission details but not other educators involved or their feedback

        **Use Cases:**
        - Educator viewing their assigned/invited missions
        - Check mission details for specific educator-mission relationship
        - Mission status tracking for educators

      operationId: get-mission-by-educator-association
      tags: [Mission Management]
      security:
        - BearerAuth: []
      parameters:
        - $ref: "#/components/parameters/MissionIdPathParam"
        - $ref: "#/components/parameters/EducatorIdPathParam"
      responses:
        200:
          description: Mission retrieved successfully (educator view - excludes educator arrays)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EducatorMissionResponse"
              example:
                success: true
                message: "Mission retrieved successfully"
                data:
                  _id: "60d0fe4f5311236168a109ca"
                  organization:
                    _id: "684a9654caa07bcde4138271"
                    organizationName: "Global Education Solutions"
                    city: "Paris"
                    country: "France"
                    phone: "+33123456789"
                    branches:
                      - branchName: "Downtown Branch"
                        branchEmail: "downtown@example.com"
                  preferredEducator: "60d0fe4f5311236168a109ca"
                  title: "Advanced Mathematics Training Program"
                  description: "Comprehensive training program covering advanced mathematical concepts including calculus, linear algebra, and statistical analysis for secondary education professionals."
                  branch: "Downtown Branch"
                  skills: ["mathematics", "algebra", "calculus", "statistics"]
                  start: "2025-07-01T09:00:00.000Z"
                  end: "2025-08-30T17:00:00.000Z"
                  technicalDocument: "https://res.cloudinary.com/dtipq9s09/image/upload/v1751048825/missions/684a9654caa07bcde4138271/technicalDocument.pdf"
                  status: "ongoing"
                  createdAt: "2025-06-27T14:30:00.000Z"
                  updatedAt: "2025-06-28T10:15:00.000Z"
        401:
          $ref: "#/components/responses/Unauthorized"
        403:
          $ref: "#/components/responses/Forbidden"
        404:
          $ref: "#/components/responses/NotFound"
        500:
          $ref: "#/components/responses/InternalServerError"

  /api/v1/missions/send-invitations:
    post:
      summary: Send mission invitations to educators
      description: |
        Sends invitations for a specific mission to multiple educators.

        **Prerequisites:**
        - Valid JWT authentication token
        - User must have organization role
        - Mission and all educator IDs must be valid

        **Business Logic:**
        - Updates mission's invitedEducators array with provided educator IDs
        - Updates each educator's missionsInvitedFor array with mission info
        - Sets invitation status to "pending" for all invitations
        - Uses $push operator to add mission invitation to educator profiles

        **Bulk Operations:**
        - Processes multiple educator invitations in a single request
        - Updates both mission and educator records
        - Returns count of successful invitations sent

        **Use Cases:**
        - Bulk invite educators to missions
        - Organization recruiting process
        - Mission staffing management
        - Educator opportunity distribution

      operationId: send-mission-invitations
      tags: [Mission Management]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InvitationRequest"
            examples:
              singleInvitation:
                summary: Send invitation to one educator
                value:
                  missionId: "60d0fe4f5311236168a109ca"
                  invitees: ["60d0fe4f5311236168a109cb"]
              multipleInvitations:
                summary: Send invitations to multiple educators
                value:
                  missionId: "60d0fe4f5311236168a109ca"
                  invitees:
                    [
                      "60d0fe4f5311236168a109cb",
                      "60d0fe4f5311236168a109cc",
                      "60d0fe4f5311236168a109cd",
                      "60d0fe4f5311236168a109ce",
                      "60d0fe4f5311236168a109cf",
                    ]
      responses:
        200:
          $ref: "#/components/responses/InvitationSuccess"
        400:
          $ref: "#/components/responses/BadRequest"
        401:
          $ref: "#/components/responses/Unauthorized"
        403:
          $ref: "#/components/responses/Forbidden"
        404:
          $ref: "#/components/responses/NotFound"
        500:
          $ref: "#/components/responses/InternalServerError"